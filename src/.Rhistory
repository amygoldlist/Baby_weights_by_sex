WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
baby_cleanest
baby_cleanest %>%
filter(BIRTHWEIGHT!=0)
baby_cleanest %>%
filter(WEIGHT_LOW!=0)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")[1]
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " "),
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
baby_cleanest %>%
filter(WEIGHT_LOW!=0)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")[1],
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
baby_cleanest %>%
filter(WEIGHT_LOW!=0)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")[,1],
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
getwd()
library(tidyverse)
library(stringr)
raw_data <- read_csv("../data/01023509_eng.csv")
getwd()
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
levels(baby_data$SEX)
levels(baby_data$BIRTHWEIGHT)
##get rid of the summary data
baby_cleaner <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " "),
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
levels(baby_data$BIRTHWEIGHT)
levels(baby_dcleanest$BIRTHWEIGHT)
levels(baby_cleanest$BIRTHWEIGHT)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " "),
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
levels(baby_cleanest$BIRTHWEIGHT)
type(baby_cleanest$BIRTHWEIGHT)
str(baby_cleanest$BIRTHWEIGHT)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement="")))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""))
levels(baby_cleanest$BIRTHWEIGHT)
baby_cleanest
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT))
levels(baby_cleanest$BIRTHWEIGHT)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement="")) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
Baby_cleanest
baby_cleanest
baby_best <-
select(Ref_Date, GEO, SEX, Weight_low, weight_high, Value)
baby_cleanest <-
select(Ref_Date, GEO, SEX, Weight_low, weight_high, Value)
str(baby_cleanest)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, weight_high, Value)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement="")) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
str(baby_cleanest)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
WEIGHT_LOW = forcats::fct_recode(as.factor(WEight_Low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
Weight_low = forcats::fct_recode(as.factor(Weight_Low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
Weight_low = forcats::fct_recode(as.factor(Weight_Low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low = forcats::fct_recode(as.factor(Weight_Low,"0"= "less" )))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_Low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low== as.numeric(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.numeric(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.integer(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.integer(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.integer(Weight_low),
Weight_high= as.integer(Weight_high),
Weight_mid = mean(Weight_high, Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.integer(Weight_low),
Weight_high= as.integer(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numericr(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
##write data to a new csv
write_csv(baby_data, "../data/baby_data.csv")
##write data to a new csv
write_csv(baby_data, "../results/baby_data.csv")
##write data to a new csv
write_csv(baby_data, "../results/baby_data.csv")
library(tidyverse)
library(stringr)
raw_data <- read_csv("../data/01023509_eng.csv")
getwd()
##explore data
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
levels(baby_data$SEX)
levels(baby_data$GEO)
levels(baby_data$BIRTHWEIGHT)
levels(baby_data$UNIT)
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement="")) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
##fix up those pesky weights!
baby_data <- baby_data %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
##write data to a new csv
write_csv(baby_data, "../results/baby_data.csv")
str(baby_data)
##fix up those pesky weights!
baby_data <- baby_data %>%
select(Ref_Date, GEO, SEX, BIRTHWEIGHT, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2) %>%
select(Ref_Date, GEO, SEX, BIRTHWEIGHT, Weight_low, Weight_high, Weight_mid, Value)
##fix up those pesky weights!
baby_data <- baby_data %>%
select(Ref_Date, GEO, SEX, BIRTHWEIGHT, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2) %>%
select(Ref_Date, GEO, SEX, BIRTHWEIGHT, Weight_low, Weight_high, Weight_mid, Value)
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement="")) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
##fix up those pesky weights!
baby_data <- baby_data %>%
select(Ref_Date, GEO, SEX, BIRTHWEIGHT, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2) %>%
select(Ref_Date, GEO, SEX, BIRTHWEIGHT, Weight_low, Weight_high, Weight_mid, Value)
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
str(baby_data)
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
str(baby_data)
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
Weight_class =BIRTHWEIGHT) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
Weight_class =BIRTHWEIGHT) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
str(baby_data)
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
Weight_class =BIRTHWEIGHT) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
Weight_class =BIRTHWEIGHT)
str(baby_data)
baby_data%>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
baby_data%>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams")) %>% head()
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
str(baby_data)
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
Weight_class =BIRTHWEIGHT)
##fix up those pesky weights!
baby_data <- baby_data %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams")) %>%
select(Ref_Date, GEO, SEX, WEight_class, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2) %>%
select(Ref_Date, GEO, SEX, BIRTHWEIGHT, Weight_low, Weight_high, Weight_mid, Value)
baby_data <- baby_data %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams")) %>%
select(Ref_Date, GEO, SEX, Weight_class, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2) %>%
select(Ref_Date, GEO, SEX, BIRTHWEIGHT, Weight_low, Weight_high, Weight_mid, Value)
str(baby_data)
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births") %>%
droplevels()
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
Weight_class =BIRTHWEIGHT)
str(baby_data)
##fix up those pesky weights!
baby_data <- baby_data %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams")) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births") %>%
droplevels()
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
Weight_class =BIRTHWEIGHT) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
str(baby_data)
##fix up those pesky weights!
baby_data <- baby_data %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
str(baby_data)
baby_data%>%
select(Ref_Date, GEO, SEX, Weight_class, Weight_low, Weight_high, Weight_mid, Value)
baby_data%>%
select(Ref_Date, GEO, SEX, Weight_class, Weight_low, Weight_high, Weight_mid, Value) %>%
mutate(GEO =as.factor(GEO),
Weight_class= as.factor(Weight_class))
str(baby_data)
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
##get rid of the summary data
baby_data <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births") %>%
droplevels()
##get rid of extra characters!
baby_data <- baby_data %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
Weight_class =BIRTHWEIGHT) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
##fix up those pesky weights!
baby_data <- baby_data %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.integer(Weight_low),
Weight_high= as.integer(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
str(baby_data)
##Get everything as the correct type
baby_data <- baby_data%>%
select(Ref_Date, GEO, SEX, Weight_class, Weight_low, Weight_high, Weight_mid, Value) %>%
mutate(GEO =as.factor(GEO),
Weight_class= as.factor(Weight_class))
str(baby_data)
##write data to a new csv
write_csv(baby_data, "../results/baby_data.csv")
