##get rid of extra characters
baby_cleaner$GEO %>%
str_replace(pattern = ", place of residence of mother", replacement="")
raw_data <- read_csv("../data/01023509_eng.csv")
##explore data
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT))
levels(baby_data$SEX)
levels(baby_data$GEO)
levels(baby_data$BIRTHWEIGHT)
baby_cleaner <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight")
raw_data <- read_csv("../data/01023509_eng.csv")
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT))
raw_data <- read_csv("../data/01023509_eng.csv")
library(tidyverse)
library(stringr)
raw_data <- read_csv("../data/01023509_eng.csv")
##explore data
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT))
levels(baby_data$SEX)
levels(baby_data$GEO)
levels(baby_data$BIRTHWEIGHT)
#summarize(baby_data)
##get rid of the summary data
baby_cleaner <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight")
##get rid of extra characters
baby_cleaner$GEO %>%
str_replace(pattern = ", place of residence of mother", replacement="")
baby_cleaner
baby_cleaner$BIRTHWEIGHT %>%
str_split(pattern = " ")
baby_cleaner
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT)) )
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
levels(baby_data$BUNIT)
levels(baby_data$UNIT)
##get rid of the summary data
baby_cleaner <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(UNIT == "Number of live births")
baby_cleaner
##get rid of extra characters!
baby_cleaner$GEO %>%
str_replace(pattern = ", place of residence of mother", replacement="")
baby_cleaner
baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, less than  ", replacement=""))
baby_cleanest
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""))
baby_cleanest
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW = fct_recode(0="less than 500 grams"))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW = fct_recode("0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW = forcats::fct_recode("0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW = forcats::fct_recode("0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
baby_cleanest
baby_cleanest %>%
filter(BIRTHWEIGHT!=0)
baby_cleanest %>%
filter(WEIGHT_LOW!=0)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")[1]
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " "),
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
baby_cleanest %>%
filter(WEIGHT_LOW!=0)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")[1],
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
baby_cleanest %>%
filter(WEIGHT_LOW!=0)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " ")[,1],
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
getwd()
library(tidyverse)
library(stringr)
raw_data <- read_csv("../data/01023509_eng.csv")
getwd()
baby_data <- raw_data %>%
mutate(SEX = as.factor(SEX),
GEO = as.factor(GEO),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT),
UNIT = as.factor(UNIT))
levels(baby_data$SEX)
levels(baby_data$BIRTHWEIGHT)
##get rid of the summary data
baby_cleaner <- baby_data %>%
filter(SEX != "Both sexes") %>%
filter(GEO != "Canada, place of residence of mother") %>%
filter(BIRTHWEIGHT !="Total, birth weight") %>%
filter(BIRTHWEIGHT !="Birth weight, not stated") %>%
filter(UNIT == "Number of live births")
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " "),
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
levels(baby_data$BIRTHWEIGHT)
levels(baby_dcleanest$BIRTHWEIGHT)
levels(baby_cleanest$BIRTHWEIGHT)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
WEIGHT_LOW= str_split(BIRTHWEIGHT, pattern = " "),
WEIGHT_LOW = forcats::fct_recode(BIRTHWEIGHT,"0"= "less than 500 grams" ))
levels(baby_cleanest$BIRTHWEIGHT)
type(baby_cleanest$BIRTHWEIGHT)
str(baby_cleanest$BIRTHWEIGHT)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement="")))
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""))
levels(baby_cleanest$BIRTHWEIGHT)
baby_cleanest
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement=""),
BIRTHWEIGHT = as.factor(BIRTHWEIGHT))
levels(baby_cleanest$BIRTHWEIGHT)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement="")) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
Baby_cleanest
baby_cleanest
baby_best <-
select(Ref_Date, GEO, SEX, Weight_low, weight_high, Value)
baby_cleanest <-
select(Ref_Date, GEO, SEX, Weight_low, weight_high, Value)
str(baby_cleanest)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, weight_high, Value)
##get rid of extra characters!
baby_cleanest <- baby_cleaner %>%
mutate(GEO = str_replace(GEO,pattern = ", place of residence of mother", replacement=""),
BIRTHWEIGHT= str_replace(BIRTHWEIGHT,pattern = "Birth weight, ", replacement="")) %>%
separate(BIRTHWEIGHT, c("Weight_low", "to", "Weight_high", "grams"))
str(baby_cleanest)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
WEIGHT_LOW = forcats::fct_recode(as.factor(WEight_Low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
Weight_low = forcats::fct_recode(as.factor(Weight_Low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
Weight_low = forcats::fct_recode(as.factor(Weight_Low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low = forcats::fct_recode(as.factor(Weight_Low,"0"= "less" )))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_Low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low== as.numeric(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.numeric(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.integer(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.integer(Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.integer(Weight_low),
Weight_high= as.integer(Weight_high),
Weight_mid = mean(Weight_high, Weight_low))
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.integer(Weight_low),
Weight_high= as.integer(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numericr(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
baby_cleanest %>%
select(Ref_Date, GEO, SEX, Weight_low, Weight_high, Value) %>%
mutate(Weight_low= as.factor(Weight_low),
Weight_low = forcats::fct_recode(Weight_low,"0"= "less" ),
Weight_low= as.character(Weight_low),
Weight_low= as.numeric(Weight_low),
Weight_high= as.numeric(Weight_high),
Weight_mid = (Weight_high +Weight_low)/2)
##write data to a new csv
write_csv(baby_data, "../data/baby_data.csv")
##write data to a new csv
write_csv(baby_data, "../results/baby_data.csv")
